<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Taapmaan Cold Chain Logistics - Explore Available Vehicles for Efficient Cold Storage Solutions</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <meta content="Free HTML Templates" name="keywords" />
        <meta content="Free HTML Templates" name="description" />
        <!-- Include your CSS and JavaScript libraries -->

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJx3BhuXQPo97BXMmGj_hwnOLOlV-O2EQ&libraries=places"></script>

        <!-- Favicon -->
        <link href="img/favicon.ico" rel="icon" />

        <!-- Google Web Fonts -->
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Rubik&display=swap" rel="stylesheet" />

        <!-- Font Awesome -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" rel="stylesheet" />

        <!-- Libraries Stylesheet -->
        <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />
        <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

        <!-- Customized Bootstrap Stylesheet -->
        <link href="css/bootstrap.min.css" rel="stylesheet" />

        <!-- Template Stylesheet -->
        <link href="css/style.css" rel="stylesheet" />
    </head>
    <body>
        <!-- Topbar Start -->
        <div class="container-fluid bg-secondaryblueg py-3 px-lg-5 d-none d-lg-block" style="background-color: #d1e9ef">
            <div class="row">
                <div class="col-md-6 text-center text-lg-left mb-2 mb-lg-0">
                    <div class="d-inline-flex align-items-center">
                        <a class="text-dark pr-3" href=""><i class="fa fa-phone-alt mr-2"></i>+012 345 6789</a>
                        <span class="text-dark">|</span>
                        <a class="text-dark px-3" href=""><i class="fa fa-envelope mr-2"></i>info@example.com</a>
                    </div>
                </div>
                <div class="col-md-6 text-center text-lg-right">
                    <div class="d-inline-flex align-items-center">
                        <a class="text-dark px-3" href="">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a class="text-dark px-3" href="">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a class="text-dark px-3" href="">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a class="text-dark px-3" href="">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a class="text-dark pl-3" href="">
                            <i class="fab fa-youtube"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Topbar End -->

        <!-- Navbar Start -->
        <div class="container-fluid position-relative nav-bar p-0">
            <div class="position-relative px-lg-5" style="z-index: 9">
                <nav class="navbar navbar-expand-lg bg-white shadow navbar-dark py-3 py-lg-0 pl-3 pl-lg-5">
                    <a href="index.html" class="navbar-brand">
                        <img src="img/logo.png" width="180px" />
                    </a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-between px-3" id="navbarCollapse">
                        <div class="navbar-nav ml-auto py-0">
                            <a href="index.html" class="nav-item nav-link active">Home</a>
                            <a href="about.html" class="nav-item nav-link">About</a>
                            <a href="service.html" class="nav-item nav-link">Service</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Vehicles</a>
                                <div class="dropdown-menu rounded-0 m-0">
                                    <a href="car.html" class="dropdown-item">Car Listing</a>
                                    <a href="detail.html" class="dropdown-item">Car Detail</a>
                                    <a href="booking.html" class="dropdown-item">Car Booking</a>
                                </div>
                            </div>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Gallery</a>
                                <div class="dropdown-menu rounded-0 m-0">
                                    <a href="team.html" class="dropdown-item">The Team</a>
                                    <a href="testimonial.html" class="dropdown-item">Testimonial</a>
                                </div>
                            </div>
                            <a href="contact.html" class="nav-item nav-link">Contact</a>
                            <a href="login.html" class="nav-item nav-link">Login</a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
        <!-- Navbar End -->
        <div class="container">
            <h2 class="mb-md-4 text-center pt-4 text-secondaryblue">Your One Stop Cold <span class="text-primaryorangehg" style="color: #ffb125">& Hot Chain Solution</span></h2>
            <div class="d-flex align-items-center justify-content-center my-4">
                <form id="truckFilterForm">
                    <div class="row justify-content-center">
                        <div class="col-xl-4 col-6 d-flex flex-column my-2">
                            <label>Pickup Location:</label>
                            <input id="pickup-location" type="text" class="form-control p-3" placeholder="Enter pickup location" required />
                        </div>

                        <div class="col-xl-4 col-6 d-flex flex-column my-2">
                            <label>Drop Location:</label>
                            <input id="drop-location" type="text" class="form-control p-3" placeholder="Enter drop location" required />
                        </div>

                        <div class="col-xl-4 col-6 d-flex flex-column my-2">
                            <label>Pickup Date:</label>
                            <input id="pickup-date" type="text" class="form-control p-3 datetimepicker-input" placeholder="Pickup Date" data-target="#date" data-toggle="datetimepicker" />
                        </div>

                        <div class="col-xl-4 col-6 d-flex flex-column my-2">
                            <label>Vehicle Type:</label>
                            <select id="selected-vehicle" class="form-control p-2" style="min-height: 50px">
                                <option value="Frozen">Frozen</option>
                                <option value="Chiller">Chiller</option>
                                <option value="Dry">Dry</option>
                            </select>
                        </div>
                        <div class="col-xl-4 col-6 d-flex flex-column my-2">
                            <label>Quantity Of Product:</label>
                            <select id="quantity-product" class="custom-select px-4 mb-3" name="entry.541085222" style="height: 50px">
                                <option selected>Quantity of product</option>
                                <option value="0-100Kg">00-100Kg</option>
                                <option value="100-250kg">100-250kg</option>
                                <option value="250-700kg">250-700kg</option>
                                <option value="700-1000kg">700-1000kg</option>
                                <option value="1000-8000kg">1000-8000kg</option>
                            </select>
                        </div>
                        <div class="col-xl-4 col-6 d-flex flex-column my-2">
                            <label>Type Of Product:</label>
                            <select id="type-product" class="custom-select px-4 mb-3" name="entry.863500876" style="height: 50px">
                                <option selected>Type of product</option>
                                <option value="Frozen Food">Frozen Food</option>
                                <option value="Dairy">Dairy</option>
                                <option value="Raw Meat">Raw Meat</option>
                                <option value="Pharma">Pharma</option>
                                <option value="Fruits & veggies">Fruits & veggies</option>
                                <option value="Ice Cream">Ice Cream</option>
                                <option value="Frozen Peas">Frozen Peas</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>

                        <div class="row justify-content-center align-items-center my-3">
                            <button type="button" onclick="fetchAvailableTrucks()">Search</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <hr />

        <div class="all-vehicles row">
            <div id="vehicleResults" class="col-md-9 row justify-content-center mt-4"></div>
            <!-- <div class="price-estimation col-md-3">
                <div class="rounded border bg-secondaryblue">
                    <h5 class="text-center">Price Estimation</h5>
                    <div class="result"></div>    
                    <button id="checkLocations">Location</button>
                </div>
            </div> -->
        </div>

        <script src="js/main.js"></script>

        <script>
            // Get all the vehicle boxes
            const vehicleBoxes = document.querySelectorAll(".vehicle-box");
            const hiddenInput = document.getElementById("selected-vehicle");

            vehicleBoxes.forEach((box) => {
                box.addEventListener("click", function () {
                    // Remove the 'selected' class from all boxes
                    vehicleBoxes.forEach((box) => box.classList.remove("selected"));

                    // Add the 'selected' class to the clicked box
                    this.classList.add("selected");

                    // Set the value of the hidden input to the selected vehicle's data-value
                    const selectedVehicle = this.getAttribute("data-value");
                    hiddenInput.value = selectedVehicle;

                    console.log("Selected vehicle:", selectedVehicle);
                });
            });
        </script>
        <script>
            function initAutocomplete() {
                var pickupInput = document.getElementById("pickup-location");
                var dropInput = document.getElementById("drop-location");
                var storageInput = document.getElementById("storage-location");

                var pickupAutocomplete = new google.maps.places.Autocomplete(pickupInput);
                var dropAutocomplete = new google.maps.places.Autocomplete(dropInput);
                var storageAutocomplete = new google.maps.places.Autocomplete(storageInput);

                pickupAutocomplete.setComponentRestrictions({ country: ["IN", "PK", "BD", "NP", "BT", "LK", "MV"] });
                dropAutocomplete.setComponentRestrictions({ country: ["IN", "PK", "BD", "NP", "BT", "LK", "MV"] });
                storageAutocomplete.setComponentRestrictions({ country: ["IN", "PK", "BD", "NP", "BT", "LK", "MV"] });

                // Add listeners to handle the selected place
                pickupAutocomplete.addListener("place_changed", function () {
                    var place = pickupAutocomplete.getPlace();
                    console.log("Pickup location:", place);
                });

                dropAutocomplete.addListener("place_changed", function () {
                    var place = dropAutocomplete.getPlace();
                    console.log("Drop location:", place);
                });

                storageAutocomplete.addListener("place_changed", function () {
                    var place = storageAutocomplete.getPlace();
                    console.log("Storage location:", place);
                });
            }

            // Initialize Google Maps Autocomplete after the page loads
            google.maps.event.addDomListener(window, "load", initAutocomplete);
        </script>

        <script>
            // Populate fields with data from localStorage
            document.getElementById("pickup-location").value = localStorage.getItem("pickupLocation");
            document.getElementById("drop-location").value = localStorage.getItem("dropLocation");
            document.getElementById("pickup-date").value = localStorage.getItem("pickupDate");
            document.getElementById("selected-vehicle").value = localStorage.getItem("selectedVehicle");
            document.getElementById("quantity-product").value = localStorage.getItem("quantityProduct");
            document.getElementById("type-product").value = localStorage.getItem("typeProduct");

            async function fetchAvailableTrucks() {
                const pickupLocation = document.getElementById("pickup-location").value;
                const dropLocation = document.getElementById("drop-location").value;
                const pickupDate = document.getElementById("pickup-date").value;
                const selectedVehicle = document.getElementById("selected-vehicle").value;
                const quantityProduct = document.getElementById("quantity-product").value;
                const typeProduct = document.getElementById("type-product").value;

                try {
                    // Fetch data directly from the local vehicles.json file
                    const response = await fetch("vehicles.json");
                    const data = await response.json();

                    console.log("Fetched vehicles:", data); // Check the structure to confirm

                    const vehicleResults = document.getElementById("vehicleResults");
                    vehicleResults.innerHTML = ""; // Clear previous results

                    // Access the nested array, assuming it’s inside `data`
                    const vehicles = data; // Adjust this based on the actual structure of vehicles.json

                    if (!Array.isArray(vehicles)) {
                        vehicleResults.innerHTML = "<p>Unexpected response format. No vehicles available.</p>";
                        return;
                    }

                    // Display each vehicle
                    vehicles.forEach((vehicle) => {
                        const vehicleCard = document.createElement("div");
                        vehicleCard.className = "col-md-9 my-2 p-0 border rounded";
                        vehicleCard.innerHTML = `
                <div class="bg-light d-flex justify-content-between">
                    <h5 class="p-2">${vehicle.vehicleName} (${vehicle.id})</h5>
                    <h5 class="p-2">Runs On: M T W T F S S</h5>
                </div>
                <div class="p-2">
                    <div class="d-flex justify-content-between">    
                    <p><strong>Locations Covered:</strong> ${vehicle.startFrom},${vehicle.dropLocations}</p>
                    </div>
                    <p><strong>Size:</strong> ${vehicle.capacity} Kg (${vehicle.size})</p>
                    <p><strong>Temperature Range:</strong> ${vehicle.vehicleType} (${vehicle.tempRange})</p>
                </div>
                <div class="m-2">
                            <button type="button" class="btn-booknow">Book Now</button>
                            <div class="result"></div> 
                        </div>`;

                        vehicleResults.appendChild(vehicleCard);
                    });
                } catch (error) {
                    console.error("Error fetching vehicles:", error);
                    vehicleResults.innerHTML = "<p>Unable to fetch vehicle data.</p>";
                }
            }

            fetchAvailableTrucks();
        </script>

        <!-- calculate price  -->

        <script src="js/priceEstimation.js"></script>

        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
